<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Modifier profil — SUPCONTENT</title>
  <link rel="stylesheet" href="/noyau/styles.css" />
</head>
<body>
  <div class="nav">
    <div class="nav-inner">
      <div class="brand"><span class="dot"></span> SUPCONTENT Music</div>
      <div class="menu">
        <a class="pill" href="/accueil/accueil.html">Accueil</a>
        <a class="pill" href="/recherche/recherche.html">Recherche</a>
        <a class="pill" href="/bibliotheque/bibliotheque.html">Bibliotheque</a>
        <a class="pill" href="/connexion/connexion.html">Connexion</a>
        <a class="pill" href="/profil/profil.html">Profil</a>
      </div>
    </div>
  </div>

  <div class="container">
    <div class="grid">
      <div class="card span7">
        <div class="row" style="justify-content:space-between;align-items:center;gap:12px">
          <h2 style="margin:0">Modifier mon profil</h2>
          <a class="btn" href="/profil/profil.html">← Retour</a>
        </div>

        <div class="row" style="gap:10px;flex-wrap:wrap;margin:12px 0 0 0">
          <span id="statusBadge" class="badge">…</span>
          <span class="badge">accessLen: <span id="accessLen">0</span></span>
        </div>

        <hr/>

        <form id="updateForm" class="form">
          <div class="two">
            <div>
              <label>Nom affiché</label>
              <input class="input" name="display_name" placeholder="Ton nom" />
            </div>
            <div>
              <label>Pseudo (@username)</label>
              <input class="input" name="username" placeholder="ex: farouk_47" />
              <small>Uniquement lettres/chiffres/_ (3–30)</small>
            </div>
          </div>

          <div>
            <label>Bio</label>
            <textarea class="input" name="bio" rows="4" placeholder="Dis un truc cool sur toi…"></textarea>
          </div>

          <div class="two">
            <div>
              <label>Site web</label>
              <input class="input" name="website" placeholder="https://..." />
            </div>
            <div>
              <label>Localisation</label>
              <input class="input" name="location" placeholder="Orly, France" />
            </div>
          </div>

          <div class="two">
            <div>
              <label>Date de naissance</label>
              <input class="input" name="birth_date" type="date" />
              <small>Format auto: YYYY-MM-DD</small>
            </div>
            <div>
              <label>Genre</label>
              <select class="input" name="gender">
                <option value="">—</option>
                <option value="male">Homme</option>
                <option value="female">Femme</option>
                <option value="other">Autre</option>
                <option value="prefer_not_to_say">Ne pas dire</option>
              </select>
            </div>
          </div>

          <div class="two">
            <div>
              <label>Photo de profil (fichier)</label>
              <input class="input" name="avatar_file" type="file" accept="image/*" />
              <small>PNG/JPG/WebP (max 3MB)</small>
            </div>
            <div>
              <label>Photo de couverture (fichier)</label>
              <input class="input" name="cover_file" type="file" accept="image/*" />
              <small>PNG/JPG/WebP (max 3MB)</small>
            </div>
          </div>

          <div class="row" style="gap:10px;flex-wrap:wrap;margin-top:10px">
            <button class="btn primary" type="submit">Enregistrer</button>
            <button id="refreshBtn" class="btn" type="button">Recharger</button>
          </div>

          <small id="hint" style="display:block;margin-top:10px;color:var(--muted)">
            Si rien ne se passe: regarde la console (F12) → Network → POST /upload/* puis PATCH /auth/me.
          </small>
        </form>
      </div>

      <div class="card span5">
        <h2>Prévisualisation</h2>
        <div id="previewBox"><small>Chargement…</small></div>
        <hr/>
        <small style="color:var(--muted)">
          Ici on preview les fichiers choisis puis on les enregistre au clic sur Enregistrer.
        </small>
      </div>
    </div>
  </div>

  <div id="toast" class="toast"></div>

  <!-- cache-busting version param ensures browser fetches latest JS -->
  <script type="module" src="/profil/profil-modifier.js?v=3"></script>
  <script type="module" src="/noyau/footer.js"></script>
</body>
</html>


